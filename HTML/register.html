<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartEU-Prep</title>
    <link rel="stylesheet" href="../CSS/register.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
     
</head>
<body>
        <div class="header-container">
  <img src="../Images/SmartEU-Prep (1).png" alt="SmartEU-Prep" class="logo">

  <!-- Hamburger Button -->
  <button class="hamburger" aria-label="Toggle navigation">
    &#9776;
  </button>
   <nav class="navbar">
            <ul class="nav-listItems">
                <li><a href="index.html">Home</a></li>
                <li class="dropdown">
                <a href="#">Interviews</a>
                <ul class="dropdown-menu">
                  <li><a href="#">Teaching</a></li>
                  <li><a href="#">HR</a></li>
                  <li><a href="#">Accountant</a></li>
                  <li id="sub-dropdown" onclick="dropdown(event)">
  <a href="#">IT Department <span class="arrow">&#9654;</span></a>
  <ul class="sub-dropdown-menu">
    <li><a href="#">Analyst</a></li>
    <li><a href="#">Hardware Engineer</a></li>
    <li><a href="#">Web Developer</a></li>
  </ul>
</li>

                  <li><a href="#">Management</a></li>
                </ul>
                </li>
                <li><a href="register.html">Register</a></li>
                <li><a href="loginPage.html">Login</a></li>
            </ul>
          </nav>

           <div class="theme-switch-wrapper">
  <label class="theme-switch" for="checkbox">
    <input type="checkbox" id="checkbox" />
    <span class="slider round"></span>
  </label>
  <span id="theme-icon">☀️</span>
</div>
</div>
     <hr>
      
      <div class="container">
          <h3>Sign Up</h3>
      
         <div id="g_id_signin"></div>
      
          <div class="divider">
              <hr><span>or</span><hr>
          </div>
      
          <form  id="registration-form" onsubmit="return submitForm()" method="post" >
              <label for="FirstName">
                  <span>First Name</span>
                  <input type="text" name="FirstName" id="FirstName" required>
                  <small id="firstNameError" class="error"></small>
                </label>
      
              <label for="LastName">
                  <span>Last Name</span>
                  <input type="text" name="LastName" id="LastName" required>
                  <small id="lastNameError" class="error"></small>
                </label>
      
              <label for="email">
                  <span>Email</span>
                  <input type="email" name="email" id="email" required>
                  <small id="emailError" class="error"></small>
                </label>
      
              <label for="password">
                  <span>Password</span>
                  <input type="password" name="password" id="password" required>
                   <small id="passwordError" class="error"></small>
                </label>
      
              <label for="confpass">
                  <span>Confirm Password</span>
                  <input type="password" name="confpass" id="confpass" required>
             <small id="confPasswordError" class="error"></small>
                </label>

              <label for="resume_upload" > 
                <span>Upload Your Resume:</span>
                <input type="file" id="resume_upload" >
            <small id="resumeUploadError" class="error"></small>
            </label>
       
              <button type="submit">Sign Up</button>
          </form>
      
          <div class="signin-link">
              <p>Already have an account? <a href="loginPage.html">Sign In</a></p>
          </div>
      </div>
     
      
     
      
    <footer>
        <div> <span><a href="aboutUs.html">About us</a></span>|<span><a href="contactUs.html">Contact us</a></span>|<span><a href="policies.html">Policies</a></span></div>
        <p>&copy; 2025 Copyright SmartEU-Prep
            All rights are reserved. </p>
    </footer>

     <script src="../JS/script.js"></script>
     <script>
  
 
    window.onload = function () {
      google.accounts.id.initialize({
        client_id: "485521769094-heu4aat6u22d55ks9r80qsuki4dcf0jl.apps.googleusercontent.com", // Your Client ID here
        callback: handleCredentialResponse
      });

      // Render the official Google Sign-In button
      google.accounts.id.renderButton(
        document.getElementById("g_id_signin"),
        { theme: "outline", size: "large" } // customize as you want
      );

      // Optionally, prompt One Tap sign-in automatically
      // google.accounts.id.prompt();
    };

    function handleCredentialResponse(response) {
      const user = decodeJwt(response.credential);  // Decode the Google token
  console.log("Google user data:", user);       // Optional: just for debugging

  const formData = new FormData();
  formData.append('FirstName', user.given_name || '');
  formData.append('LastName', user.family_name || '');
  formData.append('email', user.email);
  formData.append('login_type', 'google');  // This flags it as Google login

  // Send user info to your PHP backend to save in DB
  fetch("register_user.php", {
    method: "POST",
    body: formData
  })
  .then(res => res.text())
  .then(data => {
    alert("Google Sign-In: " + data);  // Show server response
    window.location.href = "dashboard.html"; // redirect if needed
  })
  .catch(err => console.error("Google Sign-In Error:", err));
}
      // Send token to server for login verification
    

    function decodeJwt(token) {
      const base64Url = token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      const jsonPayload = decodeURIComponent(atob(base64).split('').map(c =>
        '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)
      ).join(''));
      return JSON.parse(jsonPayload);
    }
  
</script>

<script>
document.getElementById("registration-form").addEventListener("submit", function(e) {
  e.preventDefault();

  const form = document.getElementById("registration-form");
  const formData = new FormData(form);
  formData.append('login_type', 'manual');

  fetch("http://localhost/smarteu-prep/register_user.php", {
    method: "POST",
    body: formData
  })
  .then(res => res.text())
  .then(data => {
    alert(data);
    form.reset();
  })
  .catch(err => console.error("Error:", err));
});
</script>



</body>
</html> 


 